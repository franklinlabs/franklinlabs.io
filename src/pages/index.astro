---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlogCard from '../components/BlogCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter(p => !p.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 3);
---

<BaseLayout title="Precision Tech. Prairie Born." description="Franklin Labs designs and builds electronics for real-time communication and live action — speed and reliability for signal control.">

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-navy via-navy-light to-navy">
      <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--color-primary)_0%,_transparent_50%)] opacity-10"></div>
      <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--color-accent-purple)_0%,_transparent_50%)] opacity-5"></div>
    </div>
    <div class="relative max-w-6xl mx-auto px-4 sm:px-6 py-16 sm:py-20 lg:py-24">
      <div class="max-w-3xl">
        <p class="text-primary font-semibold text-sm uppercase tracking-wider mb-4">Franklin Labs LLC</p>
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold leading-tight mb-6">
          Precision Tech.<br/>
          <span class="text-primary">Prairie Born.</span>
        </h1>
        <p class="text-lg sm:text-xl text-text-secondary leading-relaxed mb-8 max-w-2xl">
          We design and build electronics for real-time communication and live action — bringing speed and reliability to signal control.
        </p>
        <div class="flex flex-wrap gap-4">
          <a href="/contact" class="inline-flex items-center gap-2 px-6 py-3 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition-colors">
            Connect with Us
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </a>
          <a href="/blog" class="inline-flex items-center gap-2 px-6 py-3 border border-border hover:border-primary/50 text-text-primary font-semibold rounded-lg transition-colors">
            Read Our Blog
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Services -->
  <section class="py-12 sm:py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="text-center mb-14">
        <h2 class="text-3xl sm:text-4xl font-bold mb-4">What We Do</h2>
        <p class="text-text-secondary max-w-2xl mx-auto">
          Midwest-built engineering meets creative technology — hardware innovation for real-world conditions.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-surface border border-border rounded-xl p-6 hover:border-primary/30 transition-colors">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-2">Innovation & Design</h3>
          <p class="text-sm text-text-secondary">Custom electronics and embedded systems solutions, designed from scratch for real-world environments.</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-6 hover:border-primary/30 transition-colors">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-2">Live Media Technology</h3>
          <p class="text-sm text-text-secondary">Streaming, recording, and communication platforms with low-latency engineering for real-time video and telemetry.</p>
        </div>

        <div class="bg-surface border border-border rounded-xl p-6 hover:border-primary/30 transition-colors">
          <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z" />
            </svg>
          </div>
          <h3 class="text-lg font-bold mb-2">Support & Reliability</h3>
          <p class="text-sm text-text-secondary">Ongoing technical assistance for partners and customers — built to handle satellite, cellular, and unpredictable bandwidth.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Recent Blog Posts -->
  <section class="py-12 sm:py-16">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <div class="flex items-end justify-between mb-10">
        <div>
          <h2 class="text-3xl sm:text-4xl font-bold mb-2">Latest Updates</h2>
          <p class="text-text-secondary">From the workshop and the field.</p>
        </div>
        <a href="/blog" class="hidden sm:inline-flex items-center gap-1 text-primary hover:text-primary-light text-sm font-medium transition-colors">
          View all posts
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {posts.map((post) => (
          <BlogCard
            title={post.data.title}
            date={post.data.date}
            description={post.data.description}
            category={post.data.category}
            image={post.data.image}
            slug={post.id}
          />
        ))}
      </div>

      <div class="mt-8 text-center sm:hidden">
        <a href="/blog" class="inline-flex items-center gap-1 text-primary hover:text-primary-light text-sm font-medium transition-colors">
          View all posts
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-12 sm:py-16 bg-surface/50">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 text-center">
      <h2 class="text-3xl sm:text-4xl font-bold mb-4">Let's Build Something</h2>
      <p class="text-text-secondary mb-8 max-w-xl mx-auto">
        Whether you have a project in mind or just want to learn more about what we're building, we'd love to hear from you.
      </p>
      <a href="/contact" class="inline-flex items-center gap-2 px-8 py-4 bg-primary hover:bg-primary-dark text-white font-semibold rounded-lg transition-colors text-lg">
        Get in Touch
      </a>
    </div>
  </section>

</BaseLayout>
