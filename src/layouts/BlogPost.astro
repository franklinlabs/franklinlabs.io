---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  date: Date;
  description: string;
  category: string;
  image?: string;
}

const { title, date, description, category, image } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
---

<BaseLayout title={title} description={description} image={image}>
  <article class="max-w-3xl mx-auto px-4 sm:px-6 py-12 sm:py-20">
    <header class="mb-10">
      <div class="flex items-center gap-3 mb-4">
        <span class="px-3 py-1 text-xs font-semibold uppercase tracking-wider bg-primary/10 text-primary rounded-full">
          {category}
        </span>
        <time datetime={date.toISOString()} class="text-sm text-text-secondary">
          {formattedDate}
        </time>
      </div>
      <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold leading-tight mb-4">
        {title}
      </h1>
      <p class="text-lg text-text-secondary">{description}</p>
    </header>

    {image && (
      <img
        src={image}
        alt={title}
        class="w-full rounded-xl mb-10 border border-border"
      />
    )}

    <div class="prose prose-invert prose-lg max-w-none
      prose-headings:text-text-primary prose-headings:font-bold
      prose-p:text-text-secondary prose-p:leading-relaxed
      prose-a:text-primary prose-a:no-underline hover:prose-a:underline
      prose-strong:text-text-primary
      prose-code:text-primary prose-code:bg-surface prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded
      prose-pre:bg-surface prose-pre:border prose-pre:border-border
      prose-blockquote:border-primary prose-blockquote:text-text-secondary
      prose-img:rounded-xl
      prose-li:text-text-secondary">
      <slot />
    </div>

    <footer class="mt-12 pt-8 border-t border-border">
      <a href="/blog" class="inline-flex items-center gap-2 text-primary hover:text-primary-light transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back to all posts
      </a>
    </footer>
  </article>
</BaseLayout>
